(function(b){(function(){var a=false;var d=(/xyz/.test(function(){xyz}))?(/\b_super\b/):(/.*/);this.Class=function(){};Class.extend=function(l){var k=this.prototype;a=true;var j=new this();a=false;for(var i in l){if(typeof l[i]=="function"&&typeof k[i]=="function"&&d.test(l[i])){j[i]=(function(e,f){return function(){var h=this._super;this._super=k[e];var g=f.apply(this,arguments);this._super=h;return g}})(i,l[i])}else{j[i]=l[i]}}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=j;c.constructor=c;c.extend=arguments.callee;return c}})();b.fn.lateralSlider=function(a){var f={displayDuration:2000,animateDuration:1500,numColumns:10,transitions:"fade,slideUp,slideDown,slideLeft,slideRight,slideUpAndDown,slideLeftAndRight,fadeAndSlideUp,fadeAndSlideDown,fadeAndSlideLeft,fadeAndSlideRight,fadeSlideUpAndRight,fadeSlideDownAndLeft",random:false,hidePrevAndNextArrows:false,hideSlideChooser:false,captionOpacity:0.8};var e=b.extend({},f,a);this.each(function(){var D=b(this);var N=Class.extend({$imgs:null,size:null,displayImg:null,nextImg:null,numDivs:null,divWidth:null,baseCSS:null,$divs:null,transitions:[],transition:null,transitionCount:null,interval:null,width:null,init:function(){this.$imgs=b("img",D);this.size=this.$imgs.size();this.$imgs.hide();this.nextImg=0;this.width=D.width();this.numDivs=e.numColumns;this.divWidth=this.width/this.numDivs;this.baseCSS={width:this.divWidth,position:"absolute",top:0,backgroundRepeat:"no-repeat"};this.createDivs();this.$divs=b("div",D);this.transitionCount=-1},createDivs:function(){for(var g=0;g<this.numDivs;g++){var h=b("<div></div>");h.css(this.baseCSS);h.css("left",this.divWidth*g);h.appendTo(D)}}});var S=new N();var A=Class.extend({baseDuration:null,originalOffset:null,offset:null,init:function(){this.baseDuration=e.animateDuration/8;this.originalOffset=7*e.animateDuration/(8*S.numDivs);this.offset=7*e.animateDuration/(8*S.numDivs)},duration:function(){return this.baseDuration+this.offset},increment:function(){this.offset+=this.originalOffset},reset:function(){this.offset=this.originalOffset},getCSS:function(g){return{}},eachDiv:function(){return{}},applyTransition:function(){S.$divs.each(this.eachDiv);this.reset()}});var P=A.extend({applyTransition:function(){var g=this;S.$divs.each(function(){var h=g.eachDiv;if(typeof(g.eachDiv)=="function"){h=h()}b(this).animate(h,g.duration());g.increment()});this.reset()}});var G=P.extend({getCSSIndex:null,eachDivIndex:null,getCSSGroup:null,eachDivGroup:null,init:function(){this._super();this.getCSSGroup=new Array();this.eachDivGroup=new Array();this.getCSSIndex=0;this.eachDivIndex=0},getCSS:function(h){var g=this.getCSSGroup[this.getCSSIndex];this.getCSSIndex=(this.getCSSIndex+1)%this.getCSSGroup.length;return g(h)},addTransition:function(g){this.getCSSGroup.push(g.getCSS);this.eachDivGroup.push(g.eachDiv)},applyTransition:function(){var g=this;S.$divs.each(function(){var h=g.eachDivGroup[g.eachDivIndex];if(typeof(h)=="function"){h=h()}b(this).animate(h,g.duration());g.eachDivIndex=(g.eachDivIndex+1)%g.eachDivGroup.length;g.increment()});this.reset()}});var O=P.extend({getCSS:function(g){return{opacity:0}},eachDiv:{opacity:1}});var d=P.extend({getCSS:function(g){return{top:S.$imgs.eq(S.nextImg).height()}},eachDiv:{top:0}});var B=P.extend({getCSS:function(g){return{height:0}},eachDiv:function(){return{height:S.$imgs.eq(S.nextImg).height()}}});var L=P.extend({getCSS:function(h){var g=h.css("left");g=parseInt(g.substring(0,g.length-2),10);return{left:g+S.divWidth,width:0}},eachDiv:{left:"-="+S.divWidth,width:S.divWidth}});var K=P.extend({getCSS:function(g){return{width:0}},eachDiv:{width:S.divWidth}});var I=G.extend({addTransitions:function(g,h){this.addTransition(g);this.addTransition(h)}});var Q=G.extend({addTransitions:function(h,g){this.addTransition(h);this.addTransition(g)}});var E=G.extend({addTransitions:function(g,h){this.addTransition(g);this.addTransition(h)}});var H=G.extend({addTransitions:function(g,h){this.addTransition(g);this.addTransition(h)}});var J=G.extend({addTransitions:function(g,h){this.addTransition(g);this.addTransition(h)}});var c=G.extend({addTransitions:function(g,h){this.addTransition(g);this.addTransition(h)}});var R=G.extend({addTransitions:function(g,i,h){this.addTransition(g);this.addTransition(i);this.addTransition(h)}});var M=G.extend({addTransitions:function(i,g,h){this.addTransition(i);this.addTransition(g);this.addTransition(h)}});var T={fade:new O(),slideUp:new d(),slideDown:new B(),slideLeft:new L(),slideRight:new K(),slideUpAndDown:new I(),slideLeftAndRight:new Q(),fadeAndSlideUp:new E(),fadeAndSlideDown:new H(),fadeAndSlideLeft:new J(),fadeAndSlideRight:new c(),fadeSlideUpAndRight:new R(),fadeSlideDownAndLeft:new M()};T.slideUpAndDown.addTransitions(T.slideUp,T.slideDown);T.slideLeftAndRight.addTransitions(T.slideLeft,T.slideRight);T.fadeAndSlideUp.addTransitions(T.slideUp,T.fade);T.fadeAndSlideDown.addTransitions(T.fade,T.slideDown);T.fadeAndSlideLeft.addTransitions(T.fade,T.slideLeft);T.fadeAndSlideRight.addTransitions(T.slideRight,T.fade);T.fadeSlideUpAndRight.addTransitions(T.slideUp,T.fade,T.slideRight);T.fadeSlideDownAndLeft.addTransitions(T.slideDown,T.fade,T.slideLeft);N.prototype.populateTransitions=function(){var h=e.transitions.split(/,\s*/g);for(var g in h){this.transitions.push(T[h[g]])}};N.prototype.getTransition=function(){if(e.random){var g=Math.floor(Math.random()*this.transitions.length);return this.transitions[g]}else{this.transitionCount=(this.transitionCount+1)%this.transitions.length;return this.transitions[this.transitionCount]}};N.prototype.addDivCSS=function(){var h=this;var i=h.$imgs.eq(h.nextImg);var j="url("+i.attr("src")+")";var g=i.height();this.$divs.each(function(){var k=b(this);k.css({backgroundImage:j,backgroundPosition:"-"+k.css("left")+" 0px",height:g});k.css(h.transition.getCSS(k))})};N.prototype.process=function(){D.css({backgroundImage:"url("+this.$imgs.eq(this.displayImg).attr("src")+")",backgroundRepeat:"no-repeat"});this.transition=this.getTransition();this.addDivCSS();this.transition.applyTransition();D.animate({height:this.$imgs.eq(this.nextImg).height()},e.animateDuration);this.advanceShow()};N.prototype.updateCurrent=function(){b('.circle[rel="'+this.displayImg+'"]').removeClass("circle-current");b('.circle[rel="'+this.nextImg+'"]').addClass("circle-current")};N.prototype.advanceShow=function(){this.updateCurrent();this.displayImg=this.nextImg;if(this.nextImg==this.size-1){this.nextImg=0}else{this.nextImg++}};N.prototype.startShow=function(){this.interval=window.setInterval(b.proxy(this.runner,this),e.displayDuration+e.animateDuration)};N.prototype.stopShow=function(){window.clearInterval(this.interval)};N.prototype.goToSlide=function(g){if(this.$divs.filter(":animated").size()>0){return}this.stopShow();this.nextImg=g;this.updateCurrent();this.runner();if(this.nextImg==0){this.displayImg=this.size-1}else{this.displayImg=this.nextImg-1}this.startShow()};N.prototype.applyLink=function(){var i=this.$imgs.eq(this.displayImg);var h=i.parent();if(h.is("a")){h.removeAttr("style")}var g=this.$imgs.eq(this.nextImg);var j=g.parent();if(j.is("a")){j.css({display:"block",textDecoration:"none",border:"0",width:D.width(),height:g.height(),position:"absolute",top:0,left:0,zIndex:100})}};N.prototype.applyCaption=function(){var g=this.$imgs.eq(this.nextImg);var i=g.attr("title");var j=b(".caption",D);j.slideUp(function(){b(this).html(i)});if(i!=""){if(j.size()>0){if(!j.is(":visible")){j.html(i)}j.slideDown()}else{var h=b('<div class="caption"><span>'+i+"</span></div>");h.css({opacity:e.captionOpacity,width:D.width(),position:"absolute",top:0,left:0,display:"none"});h.appendTo(D);h.slideDown()}}};N.prototype.runner=function(){this.applyLink();this.applyCaption();this.process()};N.prototype.begin=function(){var g=this.$imgs.eq(this.nextImg);D.css({backgroundImage:"url("+g.attr("src")+")",height:g.height()});this.runner();this.transitionCount--;this.startShow()};var C=Class.extend({circleCount:null,init:function(){this.circleCount=0},addAll:function(){this.addCircles();this.addPrevAndNextLinks();b("a.circle").click(this.circleClickHandler);b(".prev-link").click(this.prevLinkHandler);b(".next-link").click(this.nextLinkHandler);if(e.hideSlideChooser){b("a.circle").hide()}if(e.hidePrevAndNextArrows){b(".prev-link, .next-link").hide()}},addCircles:function(){var g=this;S.$imgs.each(function(){var h=b('<a href="#" rel="'+g.circleCount+'" id="mc'+g.circleCount+'" class="circle"></a>');h.css({right:(S.size-g.circleCount-1)*20+10});h.appendTo(D);g.circleCount++})},addPrevAndNextLinks:function(){b('<a href="#" class="prev-link"></a>').appendTo(D);b('<a href="#" class="next-link"></a>').appendTo(D)},circleClickHandler:function(h){var g=parseInt(b(this).attr("rel"),10);S.goToSlide(g);h.preventDefault()},prevLinkHandler:function(h){var g=S.displayImg-1;if(g<0){g=S.size-1}S.goToSlide(g);h.preventDefault()},nextLinkHandler:function(h){var g=S.displayImg+1;if(g>=S.size){g=0}S.goToSlide(g);h.preventDefault()}});var F=new C();F.addAll();S.populateTransitions();S.begin()});return this}})(jQuery);