$define(["wgt_util"], function(h) {
    function w(e) {
        return "" != e && null != e && "" != h.trim(e) && e != undefined
    }
    return {
        init: function() {
            var t = this._params,
                i = (t.id, $compCl.getScope(t.id)),
                e = t.totalSite,
                n = t.product,
                a = t.info,
                o = t.companyfile,
                r = t.recruit,
                c = t.productMachine,
                u = t.productParts,
                l = [{
                    name: "totalSite",
                    value: e
                }, {
                    name: "product",
                    value: n
                }, {
                    name: "course",
                    value: t.course
                }, {
                    name: "teacher",
                    value: t.teacher
                }, {
                    name: "info",
                    value: a
                }, {
                    name: "atlas",
                    value: t.atlas
                }, {
                    name: "recruit",
                    value: r
                }, {
                    name: "companyfile",
                    value: o
                }, {
                    name: "productMachine",
                    value: c
                }, {
                    name: "productParts",
                    value: u
                }, {
                    name: "intro",
                    value: t.intro
                }, {
                    name: "question",
                    value: t.question
                }, {
                    name: "mapPosition",
                    value: t.mapPosition
                }, {
                    name: "corpVideo",
                    value: t.corpVideo
                }];
            i.find(".p_input > .last").click(function() {
                i.find(".p_input > .InputText").val("")
            }), i.find(".p_searchBtnBox").click(function() {
                "block" === i.find(".p_headbox").css("display") ? i.find(".p_headbox").css("display", "none") : i.find(".p_headbox").css("display", "block")
            });
            for (var d = t.appData, p = 0; p < d.length; p++) {
                d[p].name;
                for (var m = 0; m < l.length; m++) d[p].name === l[m].name && (d[p].name = l[m].value || d[p].name)
            }
            var s = {
                    data: d,
                    hasImg: !1,
                    handler: function(e, n) {}
                },
                f = i.find(".p_select").simplySelect(s);

            function v(e) {
                return e.replace(/[<>"&]/g, function(e, n, a) {
                    switch (e) {
                        case "<":
                            return "&lt;";
                        case ">":
                            return "&gt;";
                        case "&":
                            return "&amp;";
                        case '"':
                            return "&quot;"
                    }
                })
            }
            f.build(), i.find(".p_searchBtn").click(function() {
                return;
                var e = i.find("#search_keyword").val(),
                    n = f.getValue().value;
                if (w(e) && w(n) && w(t.url)) {
                    var a = t.url; - 1 == a.indexOf("?") ? a += "?" : a += "&", a = a + "searchCategory=" + encodeURIComponent(v(n)) + "&keyword=" + encodeURIComponent(encodeURIComponent(e)), "_blank" == t.target ? h.openNewWindow(a) : h.openHref(a)
                }
            }), document.onkeyup = function(e) {
                if (window.event && (e = window.event), 13 == (e.charCode || e.keyCode)) {
                    var n = i.find("#search_keyword").val(),
                        a = f.getValue().value;
                    if (w(n) && w(a) && w(t.url)) {
                        var o = t.url; - 1 == o.indexOf("?") ? o += "?" : o += "&", o = o + "searchCategory=" + encodeURIComponent(v(a)) + "&keyword=" + encodeURIComponent(encodeURIComponent(n)), "_blank" == t.target ? h.openNewWindow(o) : h.openHref(o)
                    }
                }
            }
        }
    }
});